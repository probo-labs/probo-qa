// Prisma schema for element detection test suite
// Tracks user interactions with test pages for validation

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Tracks backend state for each scenario interaction
// Used to verify if the correct action was performed on the correct element
model ScenarioInteractionState {
  id                String   @id @default(cuid())
  scenarioId        String   // 4-char hex: a3c9, 7f2e, etc.
  sessionId         String   // Cookie-based session UUID

  // What action was performed
  actionPerformed   String   // FILL, CLICK, SELECT

  // Which element was interacted with
  elementInteracted String   // CSS selector or element ID

  // Value for FILL actions
  valueFilled       String?

  // Was this the correct interaction?
  isCorrect         Boolean  @default(false)

  // Timestamp
  timestamp         DateTime @default(now())

  // Additional metadata
  metadata          Json?

  @@index([scenarioId, sessionId])
  @@map("scenario_interaction_states")
}
